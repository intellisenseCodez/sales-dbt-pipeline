version: 2

models:
  - name: stg_crm_cust_info
    description: "Staging model for CRM customer info."
    columns:
      - name: customer_id
        tests:
          - not_null # check for nulls
          - unique # check for duplicates
      - name: customer_key
        tests:
          - not_null
          - unique
      - name: marital_status
        tests:
          - accepted_values: 
              arguments:
                values: ['Married', 'Single', 'n/a']

  - name: stg_crm_prd_info
    description: "Staging model for CRM sales details with cleaned and typed fields."
    columns:
      - name: product_key
        description: "Foreign key to product dimension"
        tests:
          - not_null



      

      - name: ship_date
        description: "Shipping date, parsed from YYYYMMDD or NULL if invalid"
        # tests:
          # - dbt_utils.accepted_range:
          #     min_value: '2000-01-01'
          #     max_value: '2030-12-31'

      - name: due_date
        description: "Due date, parsed from YYYYMMDD or NULL if invalid"
        
  - name: stg_crm_sales_details
    description: "Staging model for CRM sales transactions."
    columns:
      - name: sales_amount
       

  - name: stg_erp_cust_az12
    description: "Staging model for ERP customer demographics."
    columns:
      - name: gender
        tests:
          - accepted_values: 
              arguments:
                values: ['Male', 'Female', "n/a"]


  - name: stg_erp_loc_a101
    description: "Staging model for ERP customer locations."

  - name: stg_erp_px_cat_g1v2
    description: "Staging model for ERP product categories."
